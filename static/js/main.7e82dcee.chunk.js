(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{166:function(e,t,a){e.exports=a(343)},171:function(e,t,a){},172:function(e,t,a){},174:function(e,t,a){},194:function(e,t){},196:function(e,t){},235:function(e,t){},236:function(e,t){},334:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAAAAAAZai4+AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfjBwkCHSvDeBEkAAACaElEQVR42u3V3XKiMAAF4L7/G5xErYBaq9v6s6OtLlD/ocBDbQCB7Ey7FbgwF+fcSIA5fgYTHhIj83BvAFlkkUUWWWQZErLIIsuEkEUWWSaELLLIMiFkkUWWCSGLLLJMCFlkkWVCyCKLLBNCFllkmRCyyLoD6wXXgz2K+Okwfht05OAtvqm/Ycn3rM9O0bj9pzEa5cej6AZV05JvWeEYReMSIz9PqEYzyNUpeJOY/axqXPI1K5g/SZSNUyy0S4Cbfv6BCP5valPyNWuXT/F1NMCmurRCPz94xKqclB5+ZwcvsOOmJTewouPx6JaNHeyrS8+Y5wdzTMqTLsRRfXzkHw1LfmalORWNIfDx3BP2r3M6srDNT29hVTdPMYiTqH+dtIYl9Vjl0pbv2a/289M+utXNYRfrZJHaWpTUY20A2wsCz84ekcAhP32A0O52IV0hTu1KarH812W2u8Q2xkkiq0ap3z5VM7FqW1KHVcZLZ7xfzX9fv6geoxO3LWnEUrtNkAyrf+tQv3gQkJe2JY1YYdo4KbbFJabatchCF08tS+qwYutxW8y4mv91saQttfaqLOCcpb5jNimpNVtjWJ9ZtYPXJLkI7NLRDkJ7Zvt0ga3RCdqU1GOpLcfxgovnoJt2zNDzosTv6W9Z9QgX2VdOWpTUZCUbke+E3ewXRkNAqHfwSFt3c1jp8ld/e7d5SV1Wcp5ZUtqLMB/Fa0dKZ60Vqpfy7srrhU1LbmTdNWSRRZYJIYssskwIWWSRZULIIossE0IWWWSZELLIIsuEkEUWWSaELLLIMiFkkUWWCSGLLLJMCFlkkWVC/gI+i6YMw2buTAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0wNy0wOVQxMToyOTo0MyswOTowMG8daY8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMDctMDlUMTE6Mjk6NDMrMDk6MDAeQNEzAAAAAElFTkSuQmCC"},343:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(61),l=a.n(o),c=a(32),i=(a(171),a(172),a(173),a(14)),s=a(16),m=a(15),u=a(17),d=a(37),p=(a(174),a(39)),h=a.n(p),E=a(160),f=a.n(E),g="http://localhost:3001",A={register:function(e){return h.a.post(g+"/register",e)},login:function(e){return h.a.post(g+"/login",e)},isTokenValid:function(){var e=window.localStorage.getItem("token");if(!e)return!1;var t=f.a.verify(e,"api-2019-notimetube"),a=parseInt((new Date).getTime()/1e3,10);return!(t.exp<=a)&&window.localStorage.getItem("userId")==t.id},logout:function(){window.localStorage.removeItem("userId"),window.localStorage.removeItem("token")}},b=a(86),v=a.n(b),C=a(85),j=a.n(C),w=a(62),k=a.n(w),y=a(4),O=a.n(y),S=a(84),L=a.n(S),N=a(27),x=a.n(N),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(e){e.preventDefault(),A.logout(),a.props.onClickLogout()},a.render=function(){return r.a.createElement("section",{id:"navigationBar"},a.props.isTokenValid?r.a.createElement(j.a,{bg:"dark",variant:"dark",className:"justify-content-between"},r.a.createElement(v.a,{inline:"true",className:"align-items-center"},r.a.createElement(j.a.Brand,null,"NoTimeTube"),r.a.createElement(v.a,null,r.a.createElement(k.a,{className:"mr-3"},r.a.createElement(c.b,{to:"/videos"},"V\xeddeos")),r.a.createElement(k.a,{className:"mr-3"},r.a.createElement(c.b,{to:"/videos/upload"},"Upload"))),r.a.createElement(O.a,{inline:!0},r.a.createElement(L.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),r.a.createElement(x.a,{variant:"outline-info"},"Search"))),r.a.createElement(O.a,{inline:!0},r.a.createElement(x.a,{to:"/login",variant:"outline-info",onClick:a.handleClick},"Logout"))):null)},a}return Object(u.a)(t,e),t}(n.Component),T=a(163),W=a(164),V=function(e){var t=e.component,a=Object(W.a)(e,["component"]),n=A.isTokenValid();return Object(T.a)({},void 0!=a.render&&n?r.a.createElement(d.b,a):r.a.createElement(d.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}})))},M=a(35),U=a(12),D=a.n(U),F=a(11),B=a.n(F),G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),A.register(a.state).then(function(e){201==e.status&&(alert(e.data.detail),a.props.history.push("/login"))}).catch(function(e){alert(e)})},a.handleChange=function(e){a.setState(Object(M.a)({},e.target.name,e.target.value))},a.render=function(){return r.a.createElement("section",{id:"register"},r.a.createElement(O.a,{onSubmit:a.handleSubmit},r.a.createElement(B.a,{className:"justify-content-lg-center"},r.a.createElement(O.a.Group,{as:D.a,xs:4,sm:4,md:6},r.a.createElement(O.a.Label,null,"Nome"),r.a.createElement(O.a.Control,{value:a.state.nome,onChange:a.handleChange,type:"text",name:"name",placeholder:"John"}))),r.a.createElement(B.a,{className:"justify-content-lg-center"},r.a.createElement(O.a.Group,{as:D.a,xs:10,sm:8,md:6},r.a.createElement(O.a.Label,null,"Email"),r.a.createElement(O.a.Control,{value:a.state.email,onChange:a.handleChange,type:"email",name:"email",placeholder:"John@email.com"}))),r.a.createElement(B.a,{className:"justify-content-lg-center"},r.a.createElement(O.a.Group,{as:D.a,xs:10,sm:8,md:6},r.a.createElement(O.a.Label,null,"Senha"),r.a.createElement(O.a.Control,{value:a.state.password,onChange:a.handleChange,type:"password",name:"password",placeholder:"Password"}))),r.a.createElement(B.a,{className:"justify-content-lg-center"},r.a.createElement(O.a.Group,{as:D.a,xs:10,sm:8,md:6},r.a.createElement(x.a,{variant:"primary",type:"submit"},"Registrar")))))},a.state={name:"",email:"",password:""},a}return Object(u.a)(t,e),t}(n.Component),J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),A.login(a.state).then(function(e){alert("Logado com sucesso"),window.localStorage.setItem("token",e.data.userAuth.token),window.localStorage.setItem("userId",e.data.userAuth._id),a.props.onClickLogin()}).catch(function(e){alert("Erro ao logar")})},a.handleChange=function(e){a.setState(Object(M.a)({},e.target.name,e.target.value))},a.render=function(){return r.a.createElement(O.a,{onSubmit:a.handleSubmit},r.a.createElement(B.a,{className:"justify-content-center"},r.a.createElement(O.a.Group,{as:D.a,xs:10,sm:8,md:6},r.a.createElement(O.a.Label,null,"Email"),r.a.createElement(O.a.Control,{value:a.state.email,onChange:a.handleChange,type:"email",name:"email",placeholder:"Enter email"}))),r.a.createElement(B.a,{className:"justify-content-center"},r.a.createElement(O.a.Group,{as:D.a,xs:10,sm:8,md:6},r.a.createElement(O.a.Label,null,"Senha"),r.a.createElement(O.a.Control,{value:a.state.password,onChange:a.handleChange,type:"password",name:"password",placeholder:"Password"}))),r.a.createElement(B.a,{className:"justify-content-center"},r.a.createElement(O.a.Group,{as:D.a,xs:10,sm:8,md:6},r.a.createElement("p",null,"Ainda n\xe3o tem uma conta? ",r.a.createElement(c.b,{to:"/register"},"Registrar")),r.a.createElement(x.a,{to:"/videos",variant:"primary",type:"submit"},"Login"))))},a.state={email:"",password:""},a}return Object(u.a)(t,e),t}(n.Component),R=a(44),Y=a.n(R),Z=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(e){n.props.history.push("/videos/"+n.props.id)},n.render=function(){return r.a.createElement(Y.a,null,r.a.createElement(Y.a.Img,{variant:"top",src:a(334)}),r.a.createElement(Y.a.Body,null,r.a.createElement(Y.a.Title,null,n.props.title),r.a.createElement(Y.a.Text,null,n.props.text),r.a.createElement(x.a,{onClick:n.handleClick,variant:"primary"},"Abrir v\xeddeo")))},n}return Object(u.a)(t,e),t}(n.Component),z="http://localhost:3001/videos",q={upload:function(e){var t=window.localStorage.getItem("token");return h.a.post(z,e,{headers:{Authorization:t,"content-type":"multipart/form-data"}})},get:function(e){var t=window.localStorage.getItem("token");return h.a.get(z+"/".concat(e),{headers:{Authorization:t}})},getAll:function(){var e=window.localStorage.getItem("token");return h.a.get(z,{headers:{Authorization:e}})}},P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){q.getAll().then(function(e){a.setState({videos:e.data})}).catch(function(e){alert("Erro ao listar v\xeddeos")})},a.render=function(){return r.a.createElement("section",{id:"videoFeed"},r.a.createElement("h1",{className:"align-self-center"},"V\xeddeos"),r.a.createElement(B.a,null,void 0!==a.state.videos&&a.state.videos.map(function(e){return r.a.createElement(D.a,{xs:12,sm:12,md:6,lg:4},r.a.createElement(Z,{title:e.name,text:e.description,id:e._id,history:a.props.history}))})))},a.state={videos:[]},a}return Object(u.a)(t,e),t}(n.Component),Q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){var t=new FormData;t.append("file",a.state.file),t.append("name",a.state.name),t.append("description",a.state.description),t.append("uploadUser",window.localStorage.getItem("userId")),e.preventDefault(),q.upload(t).then(function(e){201==e.status&&(alert(e.data.detail),a.props.history.push("/videos"))}).catch(function(e){alert(e)})},a.handleChange=function(e){a.setState(Object(M.a)({},e.target.name,e.target.value))},a.handleFile=function(e){a.setState({file:e.target.files[0]})},a.render=function(){return r.a.createElement("section",{id:"videoUpload"},r.a.createElement("h1",null,"Upload de v\xeddeo"),r.a.createElement(O.a,{onSubmit:a.handleSubmit},r.a.createElement(B.a,{className:"justify-content-lg-center"},r.a.createElement(O.a.Group,{as:D.a,xs:10,sm:8,md:6},r.a.createElement(O.a.Label,null,"Arquivo"),r.a.createElement(O.a.Control,{onChange:a.handleFile,type:"file",name:"file"}))),r.a.createElement(B.a,{className:"justify-content-lg-center"},r.a.createElement(O.a.Group,{as:D.a,xs:4,sm:4,md:6},r.a.createElement(O.a.Label,null,"Nome"),r.a.createElement(O.a.Control,{value:a.state.name,onChange:a.handleChange,type:"text",name:"name",placeholder:"Nome do v\xeddeo"}))),r.a.createElement(B.a,{className:"justify-content-lg-center"},r.a.createElement(O.a.Group,{as:D.a,xs:10,sm:8,md:6},r.a.createElement(O.a.Label,null,"Description"),r.a.createElement(O.a.Control,{as:"textarea",rows:"4",value:a.state.description,onChange:a.handleChange,type:"text",name:"description",placeholder:"Descri\xe7\xe3o"}))),r.a.createElement(B.a,{className:"justify-content-lg-center"},r.a.createElement(O.a.Group,{as:D.a,xs:10,sm:8,md:6},r.a.createElement(x.a,{variant:"primary",type:"submit"},"Enviar")))))},a.state={name:"",description:"",file:null},a}return Object(u.a)(t,e),t}(n.Component),X=a(165),H=a.n(X),K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){q.get(a.props.id).then(function(e){a.setState({title:e.data.name,description:e.data.description,file:e.data.file})})},a.render=function(){return r.a.createElement("section",{as:D.a,id:"videoBrowse",className:"justify-content-center"},r.a.createElement(B.a,{xs:12,sm:12,md:10,lg:8,xl:6,className:"justify-content-center"},r.a.createElement("h1",null,a.state.title)),r.a.createElement(B.a,{xs:12,sm:12,md:10,lg:8,xl:6,className:"justify-content-center"},r.a.createElement(H.a,{id:"react-player",url:"D:\\UTFPR\\7 semestre\\Web 2\\projeto kassia-jean-final\\notimetube-api\\"+a.state.file,playing:!0})),r.a.createElement(B.a,{xs:12,sm:12,md:10,lg:8,xl:6,className:"justify-content-center"},r.a.createElement("p",null,a.state.description)))},a.state={title:"",description:"",file:""},a}return Object(u.a)(t,e),t}(n.Component);a(340).config();var _=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).logout=function(e){a.setState({isTokenValid:!1})},a.login=function(e){a.setState({isTokenValid:!0})},a.render=function(){return r.a.createElement("div",null,r.a.createElement(I,{onClickLogout:a.logout,isTokenValid:a.state.isTokenValid}),r.a.createElement(d.d,null,r.a.createElement(V,{exact:!0,path:"/",component:P}),r.a.createElement(d.b,{path:"/register",component:G}),r.a.createElement(d.b,{path:"/login",render:function(e){return r.a.createElement(J,{onClickLogin:a.login})}}),r.a.createElement(V,{path:"/videos/upload",component:Q}),r.a.createElement(V,{path:"/videos/:id",render:function(e){return r.a.createElement(K,{id:e.match.params.id})}}),r.a.createElement(V,{path:"/videos",component:P})))},a.state={isTokenValid:A.isTokenValid()},a}return Object(u.a)(t,e),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(c.a,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[166,1,2]]]);
//# sourceMappingURL=main.7e82dcee.chunk.js.map